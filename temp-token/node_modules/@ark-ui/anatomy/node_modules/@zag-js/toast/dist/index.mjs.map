{"version":3,"sources":["../src/index.ts","../src/toast-group.connect.ts","../src/toast.anatomy.ts","../src/toast.dom.ts","../src/toast.utils.ts","../src/toast-group.machine.ts","../src/toast.machine.ts","../src/toast.connect.ts"],"sourcesContent":["import { isDom } from \"@zag-js/dom-query\"\nimport { warn } from \"@zag-js/utils\"\nimport { groupConnect, toaster } from \"./toast-group.connect\"\nimport { groupMachine } from \"./toast-group.machine\"\nimport { createToastMachine as createMachine } from \"./toast.machine\"\n\nexport { anatomy } from \"./toast.anatomy\"\nexport { connect } from \"./toast.connect\"\nexport type {\n  GroupMachineContext,\n  MachineContext,\n  MachineState,\n  Placement,\n  MachineApi as Api,\n  GroupMachineApi as GroupApi,\n  Service,\n  ToastOptions,\n  Type,\n} from \"./toast.types\"\nexport { createMachine }\n\nexport const group = {\n  connect: groupConnect,\n  machine: groupMachine,\n}\n\nexport function api() {\n  if (!isDom()) {\n    warn(\"toast.api() is only available in the browser\")\n  } else {\n    return toaster\n  }\n}\n","import { subscribe } from \"@zag-js/core\"\nimport type { NormalizeProps, PropTypes } from \"@zag-js/types\"\nimport { runIfFn, uuid } from \"@zag-js/utils\"\nimport { parts } from \"./toast.anatomy\"\nimport { dom } from \"./toast.dom\"\nimport type {\n  GroupMachineApi,\n  GroupMachineContext,\n  GroupProps,\n  GroupSend,\n  GroupState,\n  Options,\n  Placement,\n  PromiseOptions,\n} from \"./toast.types\"\nimport { getGroupPlacementStyle, getToastsByPlacement } from \"./toast.utils\"\n\nexport let toaster = {} as GroupMachineApi\n\nexport function groupConnect<T extends PropTypes>(\n  state: GroupState,\n  send: GroupSend,\n  normalize: NormalizeProps<T>,\n): GroupMachineApi<T> {\n  //\n  const group = {\n    count: state.context.count,\n    toasts: state.context.toasts,\n    toastsByPlacement: getToastsByPlacement(state.context.toasts),\n    isVisible(id: string) {\n      if (!state.context.toasts.length) return false\n      return !!state.context.toasts.find((toast) => toast.id == id)\n    },\n\n    create(options: Options) {\n      const uid = `toast:${uuid()}`\n      const id = options.id ? options.id : uid\n\n      if (group.isVisible(id)) return\n      send({ type: \"ADD_TOAST\", toast: { ...options, id } })\n\n      return id\n    },\n\n    upsert(options: Options) {\n      const { id } = options\n      const isVisible = id ? group.isVisible(id) : false\n      if (isVisible && id != null) {\n        return group.update(id, options)\n      } else {\n        return group.create(options)\n      }\n    },\n\n    dismiss(id?: string) {\n      if (id == null) {\n        send(\"DISMISS_ALL\")\n      } else if (group.isVisible(id)) {\n        send({ type: \"DISMISS_TOAST\", id })\n      }\n    },\n\n    remove(id?: string) {\n      if (id == null) {\n        send(\"REMOVE_ALL\")\n      } else if (group.isVisible(id)) {\n        send({ type: \"REMOVE_TOAST\", id })\n      }\n    },\n\n    dismissByPlacement(placement: Placement) {\n      const toasts = group.toastsByPlacement[placement]\n      if (toasts) {\n        toasts.forEach((toast) => group.dismiss(toast.id))\n      }\n    },\n\n    update(id: string, options: Options) {\n      if (!group.isVisible(id)) return\n      send({ type: \"UPDATE_TOAST\", id, toast: options })\n      return id\n    },\n\n    loading(options: Options) {\n      options.type = \"loading\"\n      return group.upsert(options)\n    },\n\n    success(options: Options) {\n      options.type = \"success\"\n      return group.upsert(options)\n    },\n\n    error(options: Options) {\n      options.type = \"error\"\n      return group.upsert(options)\n    },\n\n    promise<T>(promise: Promise<T>, options: PromiseOptions<T>, shared: Options = {}) {\n      const id = group.loading({ ...shared, ...options.loading })\n\n      promise\n        .then((response) => {\n          const successOptions = runIfFn(options.success, response)\n          group.success({ ...shared, ...successOptions, id })\n        })\n        .catch((error) => {\n          const errorOptions = runIfFn(options.error, error)\n          group.error({ ...shared, ...errorOptions, id })\n        })\n\n      return promise\n    },\n\n    pause(id?: string) {\n      if (id == null) {\n        send(\"PAUSE_ALL\")\n      } else if (group.isVisible(id)) {\n        send({ type: \"PAUSE_TOAST\", id })\n      }\n    },\n\n    resume(id?: string) {\n      if (id == null) {\n        send(\"RESUME_ALL\")\n      } else if (group.isVisible(id)) {\n        send({ type: \"RESUME_TOAST\", id })\n      }\n    },\n\n    getGroupProps(options: GroupProps) {\n      const { placement, label = \"Notifications\" } = options\n      return normalize.element({\n        ...parts.group.attrs,\n        tabIndex: -1,\n        \"aria-label\": label,\n        id: dom.getGroupId(placement),\n        \"data-placement\": placement,\n        \"aria-live\": \"polite\",\n        role: \"region\",\n        style: getGroupPlacementStyle(state.context, placement),\n      })\n    },\n\n    subscribe(fn: (toasts: GroupMachineContext[\"toasts\"]) => void) {\n      return subscribe(state.context.toasts, () => fn(state.context.toasts))\n    },\n  }\n\n  Object.assign(toaster, group)\n\n  return group\n}\n","import { createAnatomy } from \"@zag-js/anatomy\"\n\nexport const anatomy = createAnatomy(\"toast\").parts(\"group\", \"root\", \"title\", \"description\", \"closeTrigger\")\nexport const parts = anatomy.build()\n","import { createScope } from \"@zag-js/dom-query\"\nimport type { GroupMachineContext as GroupCtx, MachineContext as Ctx, Placement } from \"./toast.types\"\n\nexport const dom = createScope({\n  getGroupId: (placement: Placement) => `toast-group:${placement}`,\n  getRootId: (ctx: Ctx) => `toast:${ctx.id}`,\n  getTitleId: (ctx: Ctx) => `toast:${ctx.id}:title`,\n  getDescriptionId: (ctx: Ctx) => `toast:${ctx.id}:description`,\n  getCloseTriggerId: (ctx: Ctx) => `toast${ctx.id}:close`,\n  getPortalId: (ctx: GroupCtx) => `toast-portal:${ctx.id}`,\n})\n","import type { Style } from \"@zag-js/types\"\nimport type { GroupMachineContext, MachineContext, Placement, Service, Type } from \"./toast.types\"\n\nexport function getToastsByPlacement(toasts: Service[]) {\n  const result: Partial<Record<Placement, Service[]>> = {}\n\n  for (const toast of toasts) {\n    const placement = toast.state.context.placement!\n    result[placement] ||= []\n    result[placement]!.push(toast)\n  }\n\n  return result\n}\n\nexport const defaultTimeouts: Record<Type, number> = {\n  info: 5000,\n  error: 5000,\n  success: 2000,\n  loading: Infinity,\n  custom: 5000,\n}\n\nexport function getToastDuration(duration: number | undefined, type: MachineContext[\"type\"]) {\n  return duration ?? defaultTimeouts[type]\n}\n\nexport function getGroupPlacementStyle(ctx: GroupMachineContext, placement: Placement): Style {\n  const offset = ctx.offsets\n  const computedOffset =\n    typeof offset === \"string\" ? { left: offset, right: offset, bottom: offset, top: offset } : offset\n\n  const rtl = ctx.dir === \"rtl\"\n  const computedPlacement = placement\n    .replace(\"-start\", rtl ? \"-right\" : \"-left\")\n    .replace(\"-end\", rtl ? \"-left\" : \"-right\")\n\n  const isRighty = computedPlacement.includes(\"right\")\n  const isLefty = computedPlacement.includes(\"left\")\n\n  const styles: Style = {\n    position: \"fixed\",\n    pointerEvents: ctx.count > 0 ? undefined : \"none\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    \"--toast-gutter\": ctx.gutter,\n    zIndex: ctx.zIndex,\n  }\n\n  let alignItems: Style[\"alignItems\"] = \"center\"\n  if (isRighty) alignItems = \"flex-end\"\n  if (isLefty) alignItems = \"flex-start\"\n\n  styles.alignItems = alignItems\n\n  if (computedPlacement.includes(\"top\")) {\n    const offset = computedOffset.top\n    styles.top = `calc(env(safe-area-inset-top, 0px) + ${offset})`\n  }\n\n  if (computedPlacement.includes(\"bottom\")) {\n    const offset = computedOffset.bottom\n    styles.bottom = `calc(env(safe-area-inset-bottom, 0px) + ${offset})`\n  }\n\n  if (!computedPlacement.includes(\"left\")) {\n    const offset = computedOffset.right\n    styles.right = `calc(env(safe-area-inset-right, 0px) + ${offset})`\n  }\n\n  if (!computedPlacement.includes(\"right\")) {\n    const offset = computedOffset.left\n    styles.left = `calc(env(safe-area-inset-left, 0px) + ${offset})`\n  }\n\n  return styles\n}\n","import { createMachine } from \"@zag-js/core\"\nimport { MAX_Z_INDEX } from \"@zag-js/dom-query\"\nimport { compact } from \"@zag-js/utils\"\nimport { createToastMachine } from \"./toast.machine\"\nimport type { GroupMachineContext, UserDefinedGroupContext } from \"./toast.types\"\n\nexport function groupMachine(userContext: UserDefinedGroupContext) {\n  const ctx = compact(userContext)\n  return createMachine<GroupMachineContext>({\n    id: \"toaster\",\n    initial: \"active\",\n    context: {\n      dir: \"ltr\",\n      max: Number.MAX_SAFE_INTEGER,\n      toasts: [],\n      gutter: \"1rem\",\n      zIndex: MAX_Z_INDEX,\n      pauseOnPageIdle: false,\n      pauseOnInteraction: true,\n      offsets: { left: \"0px\", right: \"0px\", top: \"0px\", bottom: \"0px\" },\n      ...ctx,\n    },\n\n    computed: {\n      count: (ctx) => ctx.toasts.length,\n    },\n\n    on: {\n      SETUP: {},\n\n      PAUSE_TOAST: {\n        actions: (_ctx, evt, { self }) => {\n          self.sendChild(\"PAUSE\", evt.id)\n        },\n      },\n\n      PAUSE_ALL: {\n        actions: (ctx) => {\n          ctx.toasts.forEach((toast) => toast.send(\"PAUSE\"))\n        },\n      },\n\n      RESUME_TOAST: {\n        actions: (_ctx, evt, { self }) => {\n          self.sendChild(\"RESUME\", evt.id)\n        },\n      },\n\n      RESUME_ALL: {\n        actions: (ctx) => {\n          ctx.toasts.forEach((toast) => toast.send(\"RESUME\"))\n        },\n      },\n\n      ADD_TOAST: {\n        guard: (ctx) => ctx.toasts.length < ctx.max,\n        actions: (ctx, evt, { self }) => {\n          const options = {\n            ...ctx.defaultOptions,\n            ...evt.toast,\n            pauseOnPageIdle: ctx.pauseOnPageIdle,\n            pauseOnInteraction: ctx.pauseOnInteraction,\n            dir: ctx.dir,\n            getRootNode: ctx.getRootNode,\n          }\n          const toast = createToastMachine(options)\n          const actor = self.spawn(toast)\n          ctx.toasts.push(actor)\n        },\n      },\n\n      UPDATE_TOAST: {\n        actions: (_ctx, evt, { self }) => {\n          self.sendChild({ type: \"UPDATE\", toast: evt.toast }, evt.id)\n        },\n      },\n\n      DISMISS_TOAST: {\n        actions: (_ctx, evt, { self }) => {\n          self.sendChild(\"DISMISS\", evt.id)\n        },\n      },\n\n      DISMISS_ALL: {\n        actions: (ctx) => {\n          ctx.toasts.forEach((toast) => toast.send(\"DISMISS\"))\n        },\n      },\n\n      REMOVE_TOAST: {\n        actions: (ctx, evt, { self }) => {\n          self.stopChild(evt.id)\n          const index = ctx.toasts.findIndex((toast) => toast.id === evt.id)\n          ctx.toasts.splice(index, 1)\n        },\n      },\n\n      REMOVE_ALL: {\n        actions: (ctx, _evt, { self }) => {\n          ctx.toasts.forEach((toast) => self.stopChild(toast.id))\n          while (ctx.toasts.length) ctx.toasts.pop()\n        },\n      },\n    },\n  })\n}\n","import { createMachine, guards } from \"@zag-js/core\"\nimport { addDomEvent } from \"@zag-js/dom-event\"\nimport { compact } from \"@zag-js/utils\"\nimport { dom } from \"./toast.dom\"\nimport type { MachineContext, MachineState, Options } from \"./toast.types\"\nimport { getToastDuration } from \"./toast.utils\"\n\nconst { not, and, or } = guards\n\nexport function createToastMachine(options: Options = {}) {\n  const { type = \"info\", duration, id = \"toast\", placement = \"bottom\", removeDelay = 0, ...restProps } = options\n  const ctx = compact(restProps)\n\n  const computedDuration = getToastDuration(duration, type)\n\n  return createMachine<MachineContext, MachineState>(\n    {\n      id,\n      entry: \"invokeOnOpen\",\n      initial: type === \"loading\" ? \"persist\" : \"active\",\n      context: {\n        id,\n        type,\n        remaining: computedDuration,\n        duration: computedDuration,\n        removeDelay,\n        createdAt: Date.now(),\n        placement,\n        ...ctx,\n      },\n\n      on: {\n        UPDATE: [\n          {\n            guard: and(\"hasTypeChanged\", \"isChangingToLoading\"),\n            target: \"persist\",\n            actions: [\"setContext\", \"invokeOnUpdate\"],\n          },\n          {\n            guard: or(\"hasDurationChanged\", \"hasTypeChanged\"),\n            target: \"active:temp\",\n            actions: [\"setContext\", \"invokeOnUpdate\"],\n          },\n          {\n            actions: [\"setContext\", \"invokeOnUpdate\"],\n          },\n        ],\n      },\n\n      states: {\n        \"active:temp\": {\n          tags: [\"visible\", \"updating\"],\n          after: {\n            0: \"active\",\n          },\n        },\n\n        persist: {\n          tags: [\"visible\", \"paused\"],\n          activities: \"trackDocumentVisibility\",\n          on: {\n            RESUME: {\n              guard: not(\"isLoadingType\"),\n              target: \"active\",\n              actions: [\"setCreatedAt\"],\n            },\n            DISMISS: \"dismissing\",\n          },\n        },\n\n        active: {\n          tags: [\"visible\"],\n          activities: \"trackDocumentVisibility\",\n          after: {\n            VISIBLE_DURATION: \"dismissing\",\n          },\n          on: {\n            DISMISS: \"dismissing\",\n            PAUSE: {\n              target: \"persist\",\n              actions: \"setRemainingDuration\",\n            },\n          },\n        },\n\n        dismissing: {\n          entry: \"invokeOnClosing\",\n          after: {\n            REMOVE_DELAY: {\n              target: \"inactive\",\n              actions: \"notifyParentToRemove\",\n            },\n          },\n        },\n\n        inactive: {\n          entry: \"invokeOnClose\",\n          type: \"final\",\n        },\n      },\n    },\n    {\n      activities: {\n        trackDocumentVisibility(ctx, _evt, { send }) {\n          if (!ctx.pauseOnPageIdle) return\n          const doc = dom.getDoc(ctx)\n          return addDomEvent(doc, \"visibilitychange\", () => {\n            send(doc.visibilityState === \"hidden\" ? \"PAUSE\" : \"RESUME\")\n          })\n        },\n      },\n\n      guards: {\n        isChangingToLoading: (_, evt) => evt.toast?.type === \"loading\",\n        isLoadingType: (ctx) => ctx.type === \"loading\",\n        hasTypeChanged: (ctx, evt) => evt.toast?.type !== ctx.type,\n        hasDurationChanged: (ctx, evt) => evt.toast?.duration !== ctx.duration,\n      },\n\n      delays: {\n        VISIBLE_DURATION: (ctx) => ctx.remaining,\n        REMOVE_DELAY: (ctx) => ctx.removeDelay,\n      },\n\n      actions: {\n        setRemainingDuration(ctx) {\n          ctx.remaining -= Date.now() - ctx.createdAt\n        },\n        setCreatedAt(ctx) {\n          ctx.createdAt = Date.now()\n        },\n        notifyParentToRemove(_ctx, _evt, { self }) {\n          self.sendParent({ type: \"REMOVE_TOAST\", id: self.id })\n        },\n        invokeOnClosing(ctx) {\n          ctx.onClosing?.()\n        },\n        invokeOnClose(ctx) {\n          ctx.onClose?.()\n        },\n        invokeOnOpen(ctx) {\n          ctx.onOpen?.()\n        },\n        invokeOnUpdate(ctx) {\n          ctx.onUpdate?.()\n        },\n        setContext(ctx, evt) {\n          const { duration, type } = evt.toast\n          const time = getToastDuration(duration, type)\n          Object.assign(ctx, { ...evt.toast, duration: time, remaining: time })\n        },\n      },\n    },\n  )\n}\n","import type { NormalizeProps, PropTypes } from \"@zag-js/types\"\nimport { parts } from \"./toast.anatomy\"\nimport { dom } from \"./toast.dom\"\nimport type { MachineApi, Send, State } from \"./toast.types\"\n\nexport function connect<T extends PropTypes>(state: State, send: Send, normalize: NormalizeProps<T>): MachineApi<T> {\n  const isVisible = state.hasTag(\"visible\")\n  const isPaused = state.hasTag(\"paused\")\n\n  const pauseOnInteraction = state.context.pauseOnInteraction\n  const placement = state.context.placement\n\n  return {\n    type: state.context.type,\n    title: state.context.title,\n    description: state.context.description,\n    placement,\n    isVisible,\n    isPaused,\n    isRtl: state.context.dir === \"rtl\",\n\n    pause() {\n      send(\"PAUSE\")\n    },\n\n    resume() {\n      send(\"RESUME\")\n    },\n\n    dismiss() {\n      send(\"DISMISS\")\n    },\n\n    render() {\n      return state.context.render?.({\n        id: state.context.id,\n        type: state.context.type,\n        duration: state.context.duration,\n        title: state.context.title,\n        placement: state.context.placement,\n        description: state.context.description,\n        dismiss() {\n          send(\"DISMISS\")\n        },\n      })\n    },\n\n    rootProps: normalize.element({\n      ...parts.root.attrs,\n      dir: state.context.dir,\n      id: dom.getRootId(state.context),\n      \"data-state\": isVisible ? \"open\" : \"closed\",\n      \"data-type\": state.context.type,\n      \"data-placement\": placement,\n      role: \"status\",\n      \"aria-atomic\": \"true\",\n      tabIndex: 0,\n      style: {\n        position: \"relative\",\n        pointerEvents: \"auto\",\n        margin: \"calc(var(--toast-gutter) / 2)\",\n        \"--remove-delay\": `${state.context.removeDelay}ms`,\n        \"--duration\": `${state.context.duration}ms`,\n      },\n      onKeyDown(event) {\n        if (event.key == \"Escape\") {\n          send(\"DISMISS\")\n          event.preventDefault()\n        }\n      },\n      onFocus() {\n        if (pauseOnInteraction) {\n          send(\"PAUSE\")\n        }\n      },\n      onBlur() {\n        if (pauseOnInteraction) {\n          send(\"RESUME\")\n        }\n      },\n      onPointerEnter() {\n        if (pauseOnInteraction) {\n          send(\"PAUSE\")\n        }\n      },\n      onPointerLeave() {\n        if (pauseOnInteraction) {\n          send(\"RESUME\")\n        }\n      },\n    }),\n\n    titleProps: normalize.element({\n      ...parts.title.attrs,\n      id: dom.getTitleId(state.context),\n    }),\n\n    descriptionProps: normalize.element({\n      ...parts.description.attrs,\n      id: dom.getDescriptionId(state.context),\n    }),\n\n    closeTriggerProps: normalize.button({\n      id: dom.getCloseTriggerId(state.context),\n      ...parts.closeTrigger.attrs,\n      type: \"button\",\n      \"aria-label\": \"Dismiss notification\",\n      onClick() {\n        send(\"DISMISS\")\n      },\n    }),\n  }\n}\n"],"mappings":"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","names":["offset","group","createMachine","compact","ctx","duration","type","compact","createMachine","ctx"]}