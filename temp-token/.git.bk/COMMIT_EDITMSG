finish transaction logic and ping updates around the transaction logic
